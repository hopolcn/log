## 我家云硬改内置硬盘不掉盘 JMS578芯片 sata转USB3.0 保姆级硬改高级篇

https://www.right.com.cn/forum/thread-4054845-1-1.html



由于网友反应之前的我家云硬改的帖子文字多，毫无章法，看着就是头痛；家中还有一台我家云待改，特别推出保姆及硬改教程。
相关帖子：
[我家云硬改折腾记录+硬改指难+改USB2.0或换JMS578带3.5盘+omv设置休眠+风扇降噪](https://www.right.com.cn/forum/thread-3486158-1-1.html)
[我家云免硬改不掉盘 保姆级使用方法](https://www.right.com.cn/forum/thread-4053648-1-1.html)
[我家云硬改内置硬盘不掉盘 sata转USB2.0 保姆级硬改基础篇](https://www.right.com.cn/forum/thread-4053587-1-1.html)
[我家云armbian下升级修改JMS578的睡眠时间](https://www.right.com.cn/forum/thread-4055465-1-1.html) 不推荐此方法
[科普一下Ride_Wind大佬打包我家云最新固件使用](https://www.right.com.cn/forum/thread-4053775-1-1.html)

本篇是高级篇，追求最完美的硬改：
1稳定不掉盘，强调一下12v3a 电源够用了，用插排实测日立3t 3.5硬盘 启动时功率最高25w（测量误差1w），硬盘旋转时11W左右，实测12v2a也可以带动日立3T硬盘；
2支持2T以上大硬盘（据说JMS578支持16TB硬盘，没有这么大硬盘我不确定）；
3支持omv设置休眠（前提是硬盘支持休眠设置，我有一块西数500g的2.5蓝盘WD5000LPVT就不支持OMV休眠设置,最新发现量产时候填入的休眠时间决定这块硬盘的休眠，其他操作无法更改，这块硬盘会把关闭芯片控制休眠的0min识别成休眠时间，而不是关闭芯片控制休眠，目前不知道有多少硬盘会识别错误，而jms578量产由芯片控制的固定休眠时间范围3-11min（我根据手上的芯片测试得来）；量产时可以用USB2.0线，方便没有多余硬盘线时更新设置）；
4简单测试硬盘读写速度，条件有限测试速度仅供参考，如图；

![img](images/162719tkfy3ozz030ofyk3.png)
![img](images/162722d5vnjjjvt8qp4vo5.png)
5唯一缺点，硬改操作困难。
题外话：测试我家云 smb 到win10 速度上不去，需要关掉 “启用异步 I/O (AIO) 支持。”，速度立马上来了。
![img](images/155312c8dwlhwtx1ofxdlo.png)
我家云掉盘原因：
1 硬件内置硬盘供电bug，断电导致内置硬盘掉盘。（随主板温度升高内置硬盘供电电流会减小）
2 sata转3.0芯片bug，导致内置硬盘掉盘。
硬改方法简单说明：
1 电源硬改 短接负责控制电流的pmos，黄接黄，红接红，如图：（简单粗暴，reboot时不会因为掉电导致硬盘保护，用细铜丝短接即可，唯一问题刷机时候硬盘会启动，如果你的铜丝太细可能会烧掉，所以铜丝粗细要自己把握，觉得自己铜丝太细可以并联2，3根，用细铜丝的目的是方便焊接和焊接后可以起到保险的作用）
![img](images/163308dqfjpoqmcmoqwpwf.jpg)
2 断开我家云原版Sata转USB3.0芯片的所有连接，拆掉6个信号线电阻 和 主板背面的sata芯片电源供电电阻，如下图，拆掉红框中电阻：

![img](images/170004gthdm15fg9vgll5t.jpg)

![img](images/170430won0lwmljmltmiwn.jpg)

3用西数新元素JMS578 2.5USB3.0硬盘盒板子，连接我家云主板。
虽然想法简单焊接USB3.0的那些线就可以的，但是实际操作会碰到许多的坑，下面讲讲我碰到的坑及对应办法：
第一个坑 由于我家云的空间小，我选用了WD 新元素 2.5硬盘盒的转接板，体积很小，不好直接焊接所以保留MicroB的插头插座，也方便以后升级什么的（某宝搜索JMS578可以找到，联系客服强调要JMS578芯片，不然可能发错）；
第二个坑 我家云上的usb3.0 hub芯片没有保护，接错就烧；（应对方法：上电之前用万用表测量确保连线没有接错 和 短路）
第三个坑 6个电阻非常小 12个焊盘太小，要正确焊接 破坏左边焊盘。
![img](images/173804jmmj3m5vtshtt7wj.jpg)
第四个坑 USB3.0 A 转Micro B USB3.0 线序的颜色没有统一标准，我购买的USB3.0硬盘线，两次线色不同，和网上找到的接线图线色也不同；
第五个坑 USB3.0有一对交叉线，经过公头母头时连接有翻转，有点复杂，应对方法：我直接实测我家云电路，给出芯片到芯片的连接图，作为硬改的连接标准，检验标准；

![img](images/172357dkslc412klpcpfz6.jpg)
![img](images/171811u6zb7f9qw6c38ss6.jpg)
![img](images/171811chhym7mcopmoooj7.jpg)
看了上面三幅图，大家心里应该有数了，对照我的usb头子看看线序，实际上是顺序连接的；

![img](images/173416m5u35re1o1ds7pf1.jpg)

![img](images/173304gnk103kfs8es8kk3.jpg)


![img](images/202246u6dqdbkdaxsqbblk.jpg)
4 焊接转接板12 和 5v电源
![img](images/222059qlph96qfgq9uq9u9.jpg)
![img](images/221744yb9fo9o9f9l02fh0.jpg)
既然是保姆级硬改教程（不会操作的请修手机的师傅什么的操作）
工具级耗材：
1十字螺丝刀（头痛除了知道是7310外还真不知道是多大的）
![img](images/181053ql9955h570llaqb5.jpg)
2烙铁 （这个不是广告很重要，个人推荐黄花内热式20W非恒温电烙铁，如果你追求需要更好的烙铁，千万不要购买分离式恒温烙铁，直接一步到位T12，T13恒温烙铁，我目前用的是T12，但是为了降低硬改的成本，这次硬改我特意翻出了好久没有使用的20W黄花电烙铁为大家踩坑。下面测试一下室温，烙铁通电较长时间后最高的温度。在室温十多度的环境下20w黄花NO.420的最高温度稳定在340度，这是个比较安全的温度，烙铁接触焊点温度最好不要超过2秒，我家云板子上的锡溶解温度220左右。）
![img](images/181146nlcy77s2yfh0li0l.jpg)
![img](images/181237ldvkm08dy0vi0id1.jpg)

2020年11月16日由于普通烙铁超低感应电（实测最高33V真有效值感应电）的优势，拥有T12焊台的我还是喜欢用普通内热黄花420C，因为对芯片更安全，尽管真有效值高达124V感应电T12焊接芯片也没有翻过车，但用T12的时候心总是怕怕的。前几天又下单买了个全新的NO.420C,回来测温发现稳定温度高达450度左右，如下图，这个温度焊接我家云肯定要搞坏焊盘；
![img](images/140023btgjo3sok8kjjihg.jpg)
所以买新烙铁NO.420C的朋友建议用烙铁时串联一颗整流用的二极管1N4007等给烙铁降温；
![img](images/140023kjpp21d2764m20pe.jpg)
串联二极管时建议正规一些，用一个插板转接，上图是为了简单的测试温度零时搭的，温度稳定后316度左右，我平时用T12时也就250度，非恒温烙铁316度也是相当好用的，焊接我家云温度够了
![img](images/140759vc4pbrtct9p1pep9.jpg)

焊锡丝 推荐含锡63%的183度融化的普通焊锡丝，对焊锡丝要求不高，用量不多，一小段足够。
助焊剂 重中重 用它代替松香等，助焊膏是BGA焊接时使用的助焊神器，焊接时侯涂适量可帮助锡在器件引脚间分离清晰，尤其适合小焊点（网友推荐Pop707>UP78>om338pt>阿毛易修M50>Uv223，处于成本考虑这里推荐阿毛易修M50）涂助焊剂时建议不要连针头挤，直接用针头挑一点点助焊剂涂上即可，因为没有推荐大家买洗板水，所以焊接后没有残留是最好的，有点残留也没关系。
![img](images/181320cbhxgchtfhmhchmc.jpg)
万用表：实际上是使用万用表的蜂鸣档测通断，判断连接是否正确 或 是否短路，某宝有搜索万用表 可以看到5.9的不知道真假；（UT61E>ZT219>UT33B+注意UT33B没有通断档>几块钱的垃圾表）
多芯铜线一小段
![img](images/183628xym5ffuutd6y9u9h.jpg)
卫生纸
高温胶带或透明胶布：个人觉得高温胶带好一些，时间长了不会想透明胶布一样黏黏糊糊的；
![img](images/184118aegoe9cgzeewecwy.jpg)
JMS578转接板和配套的USB3.0 A 转Micro B USB3.0硬盘线，某宝搜索JMS578可以找到，联系客服强调要JMS578芯片，不然可能发错；
![img](images/184715owlshqw6d69o6ht6.jpg)
精密斜口钳或可以精密操作的剪刀
![img](images/185817m9ch60045x1667km.jpg)
打火机
列子
![img](images/190053l0xbuvpmmx04bbbk.jpg)
4*200mm轧带一根，也可以用铜线替代；
直径3mm热缩管1米；

下面就进入硬改实战：
1 硬改电源，拆出6个信号线电阻，拆除sata芯片供电电阻：
![img](images/233516eebnxxmeddldxxtx.jpg)

![img](images/233401ou0z5pzgh5sqtmh2.jpg)

![img](images/233556bixb4kisvxgxggx2.jpg)

（具体请看USB2.0硬改教程，方法步骤重复我就不bb了，如果看不清楚焊接怎么样可以用手机摄像头放大画面确认。）
我家云硬改内置硬盘不掉盘 sata转USB2.0 保姆级硬改基础篇
https://www.right.com.cn/forum/thread-4053587-1-1.html
强调一下焊接操作，1烙铁头上锡，清理烙铁头；2被焊接物分别加助焊剂（涂助焊剂时建议不要连针头挤，直接用针头挑一点点助焊剂涂上即可，因为没有推荐大家买洗板水，所以焊接后没有残留是最好的，有点残留也没关系），再上锡；3最后焊接可保证成功；操作不好的请练习。
下面破坏左面焊盘，用一段铜线，涂少量助焊剂，上锡，焊接在左边焊盘，用手机摄像头放大看看有没有焊机到别的地方，然后用力拉，破坏左边焊盘，顺序向下，如果不好焊接了，可以剪掉铜线头重新上锡；
![img](images/193248jlbedbn7acs4crwa.jpg)

![img](images/233746q3id3gy40qcrd3v7.jpg)

2升级量产JMS578转接板量产的时候最好接个2.5硬盘；
1 “RD Version” 打勾，密码“jmicron”
2 打勾“Firmware Update” ，然后点击“load F/W File” 加载最新固件“JMS578-Hardkenel-Release-v173.01.00.02-20190306.bin”文件
3 “EEPEROM Update”打勾，“standby Timer”值为“0”（0表示取消休眠，需要不支持OMV设置休眠时间的硬盘，建议休眠时间输入11，单位分钟，量产后omv无法修改这个值，这个提供不支持休眠设置的硬盘，有效时间3-11min)
4 点击“start”开始升级固件并量产，（如果硬盘盒没有插硬盘量产，PASS通过会较长时间，等待就好）
5 如果你有2.5硬盘可以连接我家云试一试。
![img](images/223307z55jv5f95ece2fe4.png)
![img](images/185056dwg8jrywigw5ycn7.png)

附件：  [jms578_firmware-2.7z](tools\jms578_firmware-2.7z) 

3 线束

1用斜口钳剥离 Micro B USB3.0 接头
![img](images/190632xbn9cihhc9vnjk2h.jpg)
继续剥离热熔胶；
![img](images/233857vq33sdblnl4noswl.jpg)
2用高温胶带缠几圈，保护一下，测试一下硬盘线是否还是好的，可以2.5硬盘试一试

（也可以用  [ChipGenius_v4_19_1225.rar](tools\ChipGenius_v4_19_1225.rar) 连电脑看一下是否是USB3.0状态），根据芯片连接图，理出自己的数据线焊接顺序；
![img](images/191935yiax509gi52kl52g.jpg)
![img](images/164827dnwxz306em90zlhk.png)
![img](images/233923yuhsdknuprhr85ps.jpg)
![img](images/233933jwq0onqw0kdro3o0.jpg)
![img](images/233941thixgf47dixeo3kg.jpg)
![img](images/233951chyyq0jz0taf0hxr.jpg)
![img](images/234140v5jij5dvst9vlz83.jpg)
3剪断数据线，15CM左右，剩下部分还要用到；
![img](images/192150gcdzd6mnnicncncl.jpg)
4剥离数据线外皮，9CM左右，去掉外出屏蔽网，留下屏蔽铜丝，用高温胶带缠几圈，保护一下根部；
![img](images/192432tgua675ig77ga5y6.jpg)
5剥离数据线，去掉所有的锡箔纸（我下图没有去掉我后面去掉了），这时候应该有11跟线，1跟外层屏蔽铜丝，1根红的5V+这个线不用了剪掉，1根黑色负极，2根白绿一对数据线，6两对数据线和两根地线，
理出3cm左右 屏蔽铜丝、黑色负极、两根地线，可以用火机烧去掉3cm左右的塑料绝缘层（或用牙咬，或用斜口钳剥离，可以用剪下的另一段数据线试试看那剥线种方法合适你），将这3cm左右铜线拧成一股，先试一试可以能不能穿过下图中的负极接地过孔，如果这4股地线太粗，适当减去粗的几根铜丝，保证上锡后可以穿过负极接地过孔，（这是固定数据线的第一级，很重要必须成功），上锡后的3cm线在数据线上紧密绕一圈，如图下图，调整合适距离（数据线经过SATA插头方便二级固定如图）折90度，可插入图中负极接地过孔，先别慌焊接，高温胶带粘一下图中板子部分；
![img](images/195254o4zq4zjfqqqex93x.jpg)

![img](images/203215v1jjtyk0j0si0610.jpg)

![img](images/201652edgzkoy2x3eogs3d.jpg)

6用火机剥离线数据线绝缘层（或用牙咬），地线插入负极过孔，大概量一下要去的掉6根数据线的塑料绝缘层长度，可以先用剪下的另一端数据线试一试那种方法适合你。
7剥离后的铜线，为了方便焊接，每根信号线只留4到5根铜丝，其余用精密斜口钳或精密的剪刀剪断多余的铜丝，剩下的铜丝拧成一股，涂适量M50助焊剂上锡，先别剪短铜线头，焊接时候再用精密的斜口钳或剪刀调整；
8底线插入负极过孔，调整一下，就可以焊接固定数据线了，焊接背面的焊盘固定一下，先别焊死；
![img](images/211316hfhnn7ka7ypncyuk.jpg)
9主板6个焊盘，用针头挑一点M50助焊剂涂抹，根据自己理出的线序焊接数据线，用列子夹住线，手指网下压一下夹住的数据线头，让线有个角度，方便焊接(注意列子夹住数据线的部分尽量远离被焊接的部分，避免夹破被铜丝加热软化的绝缘层)，用精密斜口钳或剪刀剪掉多余的铜线头，用烙铁焊接，从上到下依次；焊接好后将数据线第二固定在sata接口上，我是用的4*200mm轧带，如果没有轧带，你可以用usb5v红色电源线，剥开绝缘层后拧成一股来固定数据线，线头涂M50助焊剂，上锡焊死；
![img](images/212232zqdjzydjq0y1on32.jpg)
焊接好后，万用表挡位拨到蜂鸣档，这时两只表笔接触，万用表发声，这个功能可以测试线路是否接通，现在可以根据下图量一下，线路是否正确，万用表一支表笔接在硬盘转接板的插座如下图的10脚，万用表另一支表笔接在6个焊盘的最上面一个，焊接正确可以听到万用表蜂鸣器响，依次测试6条线；用万用表表笔依次接触6个焊点，看焊接是否短路；都没问题可以焊死负极过孔了，剪掉过孔伸出的多余的线头；焊接数据线完成。

![img](images/095119gn17q9lugq9q61qu.jpg)
![img](images/095201fkj44taij42atzft.jpg)
焊接转接板12V 和 5 V 电源:
1 我家云的sata线不用了，剪断用来接电源，先剪断
![img](images/220453a33ek3gyc5pzyt5g.jpg)
2 剪开sata数据线不要了，保留sata电源线，注意看看可以插入我家云插口上不，因为sata数据线上绑了轧带或铜线，可以用精密斜口钳修整一下。
![img](images/100051fz909p9g1zd71qqz.jpg)
3 电源线上锡，黄色是+12V，红色是+5V，用剪下的那节usb线，剥开几根，焊接在电源线上（目的延长电源线 和 用细线的柔软性 便于焊接）用3mm热缩管套上，烙铁中间没有锡的部分去烫一下热缩管；
![img](images/095221jeqfn5z7hhu753la.jpg)
下图中绿线是+12V，+12焊接时一定要注意焊接图中最右边的3个焊点，一定是3个，白线是负极。（因为用的usb线没有注意颜色，+12应该用黄色，希望大家不要被误导。）
![img](images/095238iirw1juli43wjuir.jpg)

![img](images/222738pzi9m1ywqtlimwzm.jpg)

以上便完成硬改，这时就要考虑是否连接通电了，或者再检查一下?
![img](images/223703yzny6b4k4c54ecun.jpg)
如果两个灯亮起，一个是USB2.0正确连接的灯，一个是 USB3.0正确连接的灯，恭喜硬改成功；如果USB3.0的灯闪烁那么你硬改失败，HUB 芯片可能已经烧掉的了接口1的USB3.0端口。
![img](images/095318sp5oocy95yxcw55c.jpg)
最后说一下休眠：
有的硬盘我测试不支持系统设置休眠，默认量产时的时间，这个时间不太精确；
日立3T硬盘，如图：

![img](images/222231qt97ckkicj1n5u75.png)
我有一块320G 老希捷硬盘ST3320813AS，不支持 “高级电源管理” ，如图设置可正常休眠：
![img](images/125537hb8bswhes58e65ts.png)